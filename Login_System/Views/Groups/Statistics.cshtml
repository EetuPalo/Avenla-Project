@model IEnumerable<Login_System.ViewModels.GroupStatisticsVM>
@{
    ViewData["Title"] = "Statistics";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>@ViewBag.GroupName - Statistics</h2>
<div class="container-fluid p-0">
    <div class="row">
        <div class="col-sm">
            <a class="btn btn-info" asp-action="Edit" asp-route-id="@TempData["GroupID"]">Edit</a> 
            <a class="btn btn-info" asp-action="Index" asp-controller="GroupMembers" asp-route-id="@TempData["GroupID"]">Members</a> 
            <a class="btn btn-info" asp-action="Index" asp-controller="SkillGoals" asp-route-name="@TempData["GroupName"]">Goals</a>
            <a class="btn btn-danger" asp-action="Delete" asp-route-id="@TempData["GroupID"]">Delete</a>
	    <a class="btn btn-danger" asp-action="Index">Back</a>
        </div>
    </div>
</div>

<hr />
<div class="container-fluid p-0">
    <div class="row">
        <div class="col-sm-2 border-right border-dark">
            <p><span class="font-weight-bold">Members:</span> @ViewBag.MemberCount</p>
            <p><span class="font-weight-bold">Goals Updated:</span> @ViewBag.LatestGoal</p>
        </div>
        <div class="col-sm-10">
            <table class="table table-hover p-0">
                <thead>
                    <tr>
                        <th>Skill</th>
                        <th>Goal</th>
                        <th class="font-weight-bold">Group Average</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model)
                    {
                        if (item.SkillGoal != -1)
                        {
                    <tr>
                        <td>@item.SkillName</td>
                        <td>@item.SkillGoal</td>
                        @if (item.Average != "0")
                        {
                            try
                            {
                                if (Convert.ToDouble(item.Average) < item.SkillGoal)
                                {
                                    <td class="text-danger font-weight-bold">@item.Average</td>
                                }
                                else if (Convert.ToDouble(item.Average) >= item.SkillGoal)
                                {
                                    <td class="text-success font-weight-bold">@item.Average</td>
                                }
                            }
                            catch
                            {
                                Console.WriteLine("ERROR");
                            }
                        }
                    </tr>
                        }
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>


